<?xml version="1.0"?>

<group title="MotionRecorder">

         <_module
            class = "Dynamixel"
            name = "Joints"
            device  = "/dev/cu.usbserial-A7005Lxn"
            index_mode = "indirect"
            printf_info ="minimal"
            use_feedback ="true"
            baud_rate = "1000000"
            angle_unit = "tau"
        />

        <module
            class = "Constant"
            name = "Joints"
            data = "0.5 0.5"
        />

 		<module
			class = "MotionRecorder"
			name = "MotionRecorder"
            mask = "1 1"
            torque = "0.25 0.25"
            filename = "motion.%d.mot"
		/>

        <_connection sourcemodule = "MotionRecorder" source = "OUTPUT" targetmodule = "Joints" target = "GOAL_POSITION" />
        <_connection sourcemodule = "MotionRecorder" source = "TORQUE" targetmodule = "Joints" target = "TORQUE_LIMIT" />
        <_connection sourcemodule = "MotionRecorder" source = "ENABLE" targetmodule = "Joints" target = "TORQUE_ENABLE" />

        <connection sourcemodule = "Joints" source = "OUTPUT" targetmodule = "MotionRecorder" target = "INPUT" />

		<view name="View">
			<plot module="Joints" source="OUTPUT" color="green" select="0, 1" x="0" y="0" width="800" height="400" />
			<plot module="MotionRecorder" source="OUTPUT" color="red" select="0, 1" x="0" y="0" width="800" height="400" />
			<bar-graph title="record" module="MotionRecorder" source="STATE" x="80" y="0" width="200" height="200" max="2" />
			<table title="time" module="MotionRecorder" source="TIME" decimals="0" x="800" y="200" width="200" height="200" />

            <button label = "Off" module="MotionRecorder" parameter="off" x="1000" y="0" height="100" width="200" />
            <button label = "Stop" module="MotionRecorder" parameter="stop" x="1000" y="100" height="100" width="200" />
            <button label = "Record" module="MotionRecorder" parameter="record" x="1000" y="200" height="100" width="200" />
            <button label = "Play"  module="MotionRecorder" parameter="play" x="1000" y="300" height="100" width="200" />
            <button label = "Train"  module="MotionRecorder" parameter="train" x="1000" y="400" height="100" width="200" />
            <button label = "Save" module="MotionRecorder" parameter="save" x="1000" y="500" height="100" width="200" />

			<plot module="MotionRecorder" source="ERROR" min="-1" nax="1" x="0" y="50" width="80" height="40" />
			<plot module="MotionRecorder" source="MEAN_ERROR" x="0" y="90" width="80" height="20" />
			<plot module="MotionRecorder" source="TORQUE" x="0" y="110" width="80" height="20" />

            <slider-horizontal title = "Joints" module="Joints" parameter="data" x="80" y="110" height="200" width="100" />
		</view>

    <module class = "Logger" name = "Logger" />
</group>
 

